<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PIN-UP Home</title>
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background: linear-gradient(135deg, #c3ec52, #0ba29d);
            color: #333;
            height: 100vh;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ì „ì²´ í™”ë©´ì„ ì™¼ìª½ ì¹´ë“œ + ì˜¤ë¥¸ìª½ ì§€ë„ ë ˆì´ì•„ì›ƒìœ¼ë¡œ ë‚˜ëˆ” */
        .wrapper {
            display: flex;
            align-items: flex-start;
            gap: 40px;
            width: 90%;
            max-width: 1200px;
        }

        .container {
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            text-align: center;
            padding: 40px;
            width: 420px;
        }

        .logo {
            width: 150px;
            height: auto;
            margin-bottom: 10px;
        }

        h1 {
            font-size: 26px;
            margin-bottom: 25px;
            color: #222;
        }

        .profile {
            margin: 15px auto 25px;
        }

        .profile img {
            border-radius: 50%;
            width: 90px;
            height: 90px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .info {
            font-size: 16px;
            margin-bottom: 25px;
        }

        .dashboard {
            background: #f7f7f7;
            border-radius: 12px;
            padding: 20px;
            box-shadow: inset 0 2px 6px rgba(0,0,0,0.05);
        }

        .stat {
            font-size: 16px;
            margin: 10px 0;
        }

        .highlight {
            color: #0ba29d;
            font-weight: bold;
        }

        .btn {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            transition: background-color 0.3s;
            margin: 8px 5px 0;
        }

        .logout-btn {
            background-color: #f44336;
            color: white;
        }

        .logout-btn:hover {
            background-color: #d32f2f;
        }

        .mypage-btn {
            background-color: #4CAF50;
            color: white;
        }

        .mypage-btn:hover {
            background-color: #388E3C;
        }

        /* ì§€ë„ ìŠ¤íƒ€ì¼ */
        .map-container {
            flex-grow: 1;
            height: 600px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        #map {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
<div class="wrapper">
    <!-- ì™¼ìª½: í™ˆ ì¹´ë“œ -->
    <div class="container">
        <img th:src="@{/images/pinup_logo.png}" alt="PINUP ë¡œê³ " class="logo">

        <h1 th:text="'í™˜ì˜í•©ë‹ˆë‹¤, ' + ${user['name']} + 'ë‹˜ ğŸ‰'"></h1>

        <div class="profile">
            <img th:src="${user['picture']}" alt="í”„ë¡œí•„ ì‚¬ì§„">
        </div>

        <div class="info">
            <p><strong>ì´ë©”ì¼:</strong> <span th:text="${user['email']}"></span></p>
        </div>

        <div class="dashboard">
            <h3>ğŸŒ ì—¬í–‰ ëŒ€ì‹œë³´ë“œ</h3>
            <p class="stat">ì •ë³µí•œ ì§€ì—­ ìˆ˜: <span class="highlight" th:text="${user['conqueredCount'] != null ? user['conqueredCount'] : 0}"></span></p>
            <p class="stat">ëˆ„ì  í¬ì¸íŠ¸: <span class="highlight" th:text="${user['totalPoints'] != null ? user['totalPoints'] : 0}"></span></p>
        </div>

        <a href="/mypage" class="btn mypage-btn">ë§ˆì´í˜ì´ì§€</a>
        <a href="/logout" class="btn logout-btn">ë¡œê·¸ì•„ì›ƒ</a>
    </div>

    <!-- ğŸ—ºì˜¤ë¥¸ìª½: ì§€ë„ ì˜ì—­ -->
    <div class="map-container">
        <div id="map"></div>
    </div>
</div>

<!-- Kakao Map SDK -->
<script type="text/javascript"
        src="//dapi.kakao.com/v2/maps/sdk.js?appkey=19f8052f0c0ae312580c82690ae7d661"></script>

<script>
    // ì§€ë„ ìƒì„±
    var mapContainer = document.getElementById('map');
    var mapOption = {
        center: new kakao.maps.LatLng(37.5665, 126.9780), // ê¸°ë³¸: ì„œìš¸
        level: 7
    };
    var map = new kakao.maps.Map(mapContainer, mapOption);

    // ë‚´ ìœ„ì¹˜ í‘œì‹œ
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
            var lat = position.coords.latitude;
            var lon = position.coords.longitude;
            var locPosition = new kakao.maps.LatLng(lat, lon);

            var marker = new kakao.maps.Marker({
                map: map,
                position: locPosition
            });

            var info = new kakao.maps.InfoWindow({
                content: '<div style="padding:5px;font-size:13px;">í˜„ì¬ ìœ„ì¹˜</div>'
            });
            info.open(map, marker);

            map.setCenter(locPosition);
        });
    } else {
        alert("GPSë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.");
    }
</script>
</body>
</html>